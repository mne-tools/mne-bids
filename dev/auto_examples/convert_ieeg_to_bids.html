<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>08. Convert iEEG data to BIDS format &#8212; mne_bids 0.7.dev0 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          MNE-BIDS</a>
        <span class="navbar-text navbar-version pull-left"><b>0.7.dev0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../whats_new.html">News</a></li>
                <li><a href="../install.html">Install</a></li>
                <li><a href="../use.html">Use</a></li>
                <li><a href="../api.html">API</a></li>
                <li><a href="../generated/cli.html">CLI</a></li>
                <li><a href="../contribute.html">Contribute!</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
<div class="navbar-form navbar-right navbar-btn dropdown btn-group-sm" style="margin-left: 20px; margin-top: 5px; margin-bottom: 5px">
  <button type="button" class="btn btn-primary navbar-btn dropdown-toggle" id="dropdownMenu1" data-toggle="dropdown">
    v0.7.dev0
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
    <li><a href="https://mne.tools/mne-bids/dev/index.html">Development</a></li>
    <li><a href="https://mne.tools/mne-bids/stable/index.html">Stable</a></li>
    <li><a href="https://mne.tools/mne-bids/v0.5/index.html">v0.6</a></li>
    <li><a href="https://mne.tools/mne-bids/v0.5/index.html">v0.5</a></li>
    <li><a href="https://mne.tools/mne-bids/v0.4/index.html">v0.4</a></li>
    <li><a href="https://mne.tools/mne-bids/v0.3/index.html">v0.3</a></li>
    <li><a href="https://mne.tools/mne-bids/v0.2/index.html">v0.2</a></li>
    <li><a href="https://mne.tools/mne-bids/v0.1/index.html">v0.1</a></li>
  </ul>
</div>


            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          

        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">08. Convert iEEG data to BIDS format</a><ul>
<li><a class="reference internal" href="#step-1-download-the-data">Step 1: Download the data</a></li>
<li><a class="reference internal" href="#bids-vs-mne-python-coordinate-systems">BIDS vs MNE-Python Coordinate Systems</a></li>
<li><a class="reference internal" href="#step-2-formatting-as-bids">Step 2: Formatting as BIDS</a></li>
<li><a class="reference internal" href="#step-3-check-and-compare-with-standard">Step 3: Check and compare with standard</a></li>
<li><a class="reference internal" href="#step-4-cite-mne-bids">Step 4: Cite mne-bids</a></li>
<li><a class="reference internal" href="#step-5-plot-output-channels-and-check-that-they-match">Step 5: Plot output channels and check that they match!</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-examples-convert-ieeg-to-bids-py"><span class="std std-ref">here</span></a>
to download the full example code or to run this example in your browser via Binder</p>
</div>
<div class="sphx-glr-example-title section" id="convert-ieeg-data-to-bids-format">
<span id="sphx-glr-auto-examples-convert-ieeg-to-bids-py"></span><h1>08. Convert iEEG data to BIDS format<a class="headerlink" href="#convert-ieeg-data-to-bids-format" title="Permalink to this headline">¶</a></h1>
<p>In this example, we use MNE-BIDS to create a BIDS-compatible directory of iEEG
data. Specifically, we will follow these steps:</p>
<ol class="arabic simple">
<li><p>Download some iEEG data from the
<a class="reference external" href="https://mne.tools/stable/auto_tutorials/misc/plot_ecog">MNE-ECoG example</a>.</p></li>
<li><p>Load the data, extract information, and save in a new BIDS directory.</p></li>
<li><p>Check the result and compare it with the standard.</p></li>
<li><p>Cite MNE-BIDS</p></li>
<li><p>Confirm that written iEEG coordinates are the
same before <a class="reference internal" href="../generated/mne_bids.write_raw_bids.html#mne_bids.write_raw_bids" title="mne_bids.write_raw_bids"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_raw_bids()</span></code></a> was called.</p></li>
</ol>
<p>The iEEG data will be written by <a class="reference internal" href="../generated/mne_bids.write_raw_bids.html#mne_bids.write_raw_bids" title="mne_bids.write_raw_bids"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_raw_bids()</span></code></a> with
the addition of extra metadata elements in the following files:</p>
<ul class="simple">
<li><p>the sidecar file <code class="docutils literal notranslate"><span class="pre">ieeg.json</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">electrodes.tsv</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coordsystem.json</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">events.tsv</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">channels.tsv</span></code></p></li>
</ul>
<p>Compared to EEG data, the main differences are within the
<code class="docutils literal notranslate"><span class="pre">coordsystem.json</span></code> and <code class="docutils literal notranslate"><span class="pre">electrodes.tsv</span></code> files.
For more information on these files,
refer to the <a class="reference external" href="https://bids-specification.readthedocs.io/en/latest/04-modality-specific-files/04-intracranial-electroencephalography.html">iEEG part of the BIDS specification</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Authors: Adam Li &lt;adam2392@gmail.com&gt;</span>
<span class="c1">#          Stefan Appelhoff &lt;stefan.appelhoff@mailbox.org&gt;</span>
<span class="c1">#</span>
<span class="c1"># License: BSD (3-clause)</span>

<span class="kn">import</span> <span class="nn">os.path</span> <span class="k">as</span> <span class="nn">op</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <a href="https://docs.python.org/3/library/pprint.html#pprint.pprint" title="pprint.pprint" class="sphx-glr-backref-module-pprint sphx-glr-backref-type-py-function"><span class="n">pprint</span></a>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">mne</span>
<span class="kn">from</span> <span class="nn">mne_bids</span> <span class="kn">import</span> <span class="p">(</span><a href="../generated/mne_bids.write_raw_bids.html#mne_bids.write_raw_bids" title="mne_bids.write_raw_bids" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-function"><span class="n">write_raw_bids</span></a><span class="p">,</span> <a href="../generated/mne_bids.BIDSPath.html#mne_bids.BIDSPath" title="mne_bids.BIDSPath" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-class"><span class="n">BIDSPath</span></a><span class="p">,</span>
                      <a href="../generated/mne_bids.read_raw_bids.html#mne_bids.read_raw_bids" title="mne_bids.read_raw_bids" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-function"><span class="n">read_raw_bids</span></a><span class="p">,</span> <a href="../generated/mne_bids.print_dir_tree.html#mne_bids.print_dir_tree" title="mne_bids.print_dir_tree" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-function"><span class="n">print_dir_tree</span></a><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="step-1-download-the-data">
<h2>Step 1: Download the data<a class="headerlink" href="#step-1-download-the-data" title="Permalink to this headline">¶</a></h2>
<p>First, we need some data to work with. We will use the
data downloaded via MNE-Python’s <code class="docutils literal notranslate"><span class="pre">datasets</span></code> API:
<a class="reference external" href="https://mne.tools/dev/generated/mne.datasets.misc.data_path.html#mne.datasets.misc.data_path" title="(in MNE v0.23.dev0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.datasets.misc.data_path()</span></code></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">misc_path</span></a> <span class="o">=</span> <a href="https://mne.tools/dev/generated/mne.datasets.misc.data_path.html#mne.datasets.misc.data_path" title="mne.datasets.misc.data_path" class="sphx-glr-backref-module-mne-datasets-misc sphx-glr-backref-type-py-function"><span class="n">mne</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">data_path</span></a><span class="p">(</span><span class="n">force_update</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># The electrode coords data are in the tsv file format</span>
<span class="c1"># which is easily read in using numpy</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fname</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">misc_path</span></a> <span class="o">+</span> <span class="s1">&#39;/ecog/sample_ecog_electrodes.tsv&#39;</span>
<a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">data</span></a> <span class="o">=</span> <a href="https://numpy.org/devdocs/reference/generated/numpy.loadtxt.html#numpy.loadtxt" title="numpy.loadtxt" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fname</span></a><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span>
                  <span class="n">comments</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
<a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">column_names</span></a> <span class="o">=</span> <a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">data</span></a><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span>
<a href="https://mne.tools/dev/generated/mne.Info.html#mne.Info" title="mne.Info" class="sphx-glr-backref-module-mne sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">info</span></a> <span class="o">=</span> <a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">data</span></a><span class="p">[</span><span class="mi">1</span><span class="p">:,</span> <span class="p">:]</span>
<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">electrode_tsv</span></a> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="k">for</span> <a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">i</span></a><span class="p">,</span> <a href="https://numpy.org/devdocs/reference/arrays.scalars.html#numpy.str_" title="numpy.str_" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">name</span></a> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">column_names</span></a><span class="p">):</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">electrode_tsv</span></a><span class="p">[</span><a href="https://numpy.org/devdocs/reference/arrays.scalars.html#numpy.str_" title="numpy.str_" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">name</span></a><span class="p">]</span> <span class="o">=</span> <a href="https://mne.tools/dev/generated/mne.Info.html#mne.Info" title="mne.Info" class="sphx-glr-backref-module-mne sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">info</span></a><span class="p">[:,</span> <a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">i</span></a><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># load in channel names</span>
<a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">ch_names</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">electrode_tsv</span></a><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>

<span class="c1"># load in the xyz coordinates as a float</span>
<a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">elec</span></a> <span class="o">=</span> <a href="https://numpy.org/devdocs/reference/generated/numpy.empty.html#numpy.empty" title="numpy.empty" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">empty</span></a><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">ch_names</span></a><span class="p">),</span> <span class="mi">3</span><span class="p">))</span>
<span class="k">for</span> <a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">ind</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">axis</span></a> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">]):</span>
    <a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">elec</span></a><span class="p">[:,</span> <a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">ind</span></a><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">electrode_tsv</span></a><span class="p">[</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">axis</span></a><span class="p">]))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Using default location ~/mne_data for misc...
Downloading archive mne-misc-data-0.8.tar.gz to /home/circleci/mne_data
Downloading https://codeload.github.com/mne-tools/mne-misc-data/tar.gz/0.8 (0 bytes)

  0%|          | Downloading : 0.00/0.00 [00:00&lt;?,        ?B/s]
  0%|          | Downloading : 56.0k/0.00 [00:00&lt;00:00,    2.53MB/s]
  0%|          | Downloading : 152k/0.00 [00:00&lt;00:00,    2.59MB/s]
  0%|          | Downloading : 216k/0.00 [00:00&lt;00:00,    2.56MB/s]
  0%|          | Downloading : 280k/0.00 [00:00&lt;00:00,    2.50MB/s]
  0%|          | Downloading : 728k/0.00 [00:00&lt;00:00,    2.62MB/s]
  0%|          | Downloading : 1.21M/0.00 [00:00&lt;00:00,    2.74MB/s]
  0%|          | Downloading : 1.71M/0.00 [00:00&lt;00:00,    2.86MB/s]
  0%|          | Downloading : 2.21M/0.00 [00:00&lt;00:00,    2.99MB/s]
  0%|          | Downloading : 2.71M/0.00 [00:00&lt;00:00,    3.12MB/s]
  0%|          | Downloading : 3.21M/0.00 [00:00&lt;00:00,    3.13MB/s]
  0%|          | Downloading : 3.34M/0.00 [00:00&lt;00:00,    3.12MB/s]
  0%|          | Downloading : 3.46M/0.00 [00:00&lt;00:00,    3.04MB/s]
  0%|          | Downloading : 3.59M/0.00 [00:00&lt;00:00,    3.03MB/s]
  0%|          | Downloading : 3.71M/0.00 [00:00&lt;00:00,    3.03MB/s]
  0%|          | Downloading : 3.84M/0.00 [00:00&lt;00:00,    2.95MB/s]
  0%|          | Downloading : 3.96M/0.00 [00:00&lt;00:00,    2.95MB/s]
  0%|          | Downloading : 4.09M/0.00 [00:00&lt;00:00,    2.93MB/s]
  0%|          | Downloading : 4.21M/0.00 [00:00&lt;00:00,    2.87MB/s]
  0%|          | Downloading : 4.46M/0.00 [00:00&lt;00:00,    2.99MB/s]
  0%|          | Downloading : 4.71M/0.00 [00:00&lt;00:00,    3.12MB/s]
  0%|          | Downloading : 5.46M/0.00 [00:00&lt;00:00,    3.26MB/s]
  0%|          | Downloading : 5.96M/0.00 [00:00&lt;00:00,    3.40MB/s]
  0%|          | Downloading : 6.46M/0.00 [00:00&lt;00:00,    3.55MB/s]
  0%|          | Downloading : 6.96M/0.00 [00:00&lt;00:00,    3.70MB/s]
  0%|          | Downloading : 7.46M/0.00 [00:00&lt;00:00,    3.85MB/s]
  0%|          | Downloading : 7.96M/0.00 [00:01&lt;00:00,    4.01MB/s]
  0%|          | Downloading : 8.46M/0.00 [00:01&lt;00:00,    4.18MB/s]
  0%|          | Downloading : 8.96M/0.00 [00:01&lt;00:00,    4.35MB/s]
  0%|          | Downloading : 9.46M/0.00 [00:01&lt;00:00,    4.52MB/s]
  0%|          | Downloading : 9.96M/0.00 [00:01&lt;00:00,    4.70MB/s]
  0%|          | Downloading : 10.5M/0.00 [00:01&lt;00:00,    4.88MB/s]
  0%|          | Downloading : 11.0M/0.00 [00:01&lt;00:00,    5.07MB/s]
  0%|          | Downloading : 11.5M/0.00 [00:01&lt;00:00,    5.26MB/s]
  0%|          | Downloading : 12.0M/0.00 [00:01&lt;00:00,    5.46MB/s]
  0%|          | Downloading : 12.5M/0.00 [00:01&lt;00:00,    5.66MB/s]
  0%|          | Downloading : 13.0M/0.00 [00:01&lt;00:00,    5.86MB/s]
  0%|          | Downloading : 13.5M/0.00 [00:01&lt;00:00,    5.74MB/s]
  0%|          | Downloading : 13.7M/0.00 [00:01&lt;00:00,    5.48MB/s]
  0%|          | Downloading : 14.0M/0.00 [00:01&lt;00:00,    5.16MB/s]
  0%|          | Downloading : 14.1M/0.00 [00:01&lt;00:00,    4.77MB/s]
  0%|          | Downloading : 14.2M/0.00 [00:01&lt;00:00,    4.65MB/s]
  0%|          | Downloading : 14.3M/0.00 [00:01&lt;00:00,    4.55MB/s]
  0%|          | Downloading : 14.5M/0.00 [00:01&lt;00:00,    4.29MB/s]
  0%|          | Downloading : 14.6M/0.00 [00:01&lt;00:00,    4.33MB/s]
  0%|          | Downloading : 15.0M/0.00 [00:01&lt;00:00,    4.51MB/s]
  0%|          | Downloading : 15.5M/0.00 [00:01&lt;00:00,    4.68MB/s]
  0%|          | Downloading : 16.0M/0.00 [00:01&lt;00:00,    4.86MB/s]
  0%|          | Downloading : 16.5M/0.00 [00:01&lt;00:00,    5.05MB/s]
  0%|          | Downloading : 17.0M/0.00 [00:01&lt;00:00,    5.25MB/s]
  0%|          | Downloading : 17.5M/0.00 [00:02&lt;00:00,    5.44MB/s]
  0%|          | Downloading : 18.0M/0.00 [00:02&lt;00:00,    5.64MB/s]
  0%|          | Downloading : 18.5M/0.00 [00:02&lt;00:00,    5.85MB/s]
  0%|          | Downloading : 18.7M/0.00 [00:02&lt;00:00,    6.03MB/s]
  0%|          | Downloading : 19.5M/0.00 [00:02&lt;00:00,    6.26MB/s]
  0%|          | Downloading : 20.0M/0.00 [00:02&lt;00:00,    6.48MB/s]
  0%|          | Downloading : 20.5M/0.00 [00:02&lt;00:00,    6.70MB/s]
  0%|          | Downloading : 21.0M/0.00 [00:02&lt;00:00,    6.93MB/s]
  0%|          | Downloading : 21.5M/0.00 [00:02&lt;00:00,    7.15MB/s]
  0%|          | Downloading : 22.0M/0.00 [00:02&lt;00:00,    7.38MB/s]
  0%|          | Downloading : 22.5M/0.00 [00:02&lt;00:00,    7.61MB/s]
  0%|          | Downloading : 23.0M/0.00 [00:02&lt;00:00,    7.84MB/s]
  0%|          | Downloading : 23.5M/0.00 [00:02&lt;00:00,    8.08MB/s]
  0%|          | Downloading : 24.0M/0.00 [00:02&lt;00:00,    8.25MB/s]
  0%|          | Downloading : 24.5M/0.00 [00:02&lt;00:00,    8.54MB/s]
  0%|          | Downloading : 25.0M/0.00 [00:02&lt;00:00,    8.84MB/s]
  0%|          | Downloading : 25.5M/0.00 [00:02&lt;00:00,    9.14MB/s]
  0%|          | Downloading : 26.0M/0.00 [00:02&lt;00:00,    9.45MB/s]
  0%|          | Downloading : 26.5M/0.00 [00:02&lt;00:00,    9.77MB/s]
  0%|          | Downloading : 27.0M/0.00 [00:02&lt;00:00,    10.1MB/s]
  0%|          | Downloading : 27.5M/0.00 [00:02&lt;00:00,    10.4MB/s]
  0%|          | Downloading : 28.0M/0.00 [00:02&lt;00:00,    10.7MB/s]
  0%|          | Downloading : 28.5M/0.00 [00:02&lt;00:00,    11.0MB/s]
  0%|          | Downloading : 29.0M/0.00 [00:02&lt;00:00,    10.8MB/s]
  0%|          | Downloading : 29.5M/0.00 [00:02&lt;00:00,    10.8MB/s]
  0%|          | Downloading : 30.0M/0.00 [00:02&lt;00:00,    10.9MB/s]
  0%|          | Downloading : 30.5M/0.00 [00:02&lt;00:00,    10.9MB/s]
  0%|          | Downloading : 30.9M/0.00 [00:02&lt;00:00,    11.0MB/s]
  0%|          | Downloading : 30.9M/0.00 [00:02&lt;00:00,    11.5MB/s]
Verifying hash 0f88194266121dd9409be94184231f25.
Removing old directory: /home/circleci/mne_data/MNE-misc-data
Decompressing the archive: /home/circleci/mne_data/mne-misc-data-0.8.tar.gz
(please be patient, this can take some time)
Successfully extracted to: [&#39;/home/circleci/mne_data/MNE-misc-data&#39;]
</pre></div>
</div>
<p>Now we make a montage stating that the iEEG contacts are in the MNI
coordinate system, which corresponds to the <em class="xref py py-obj">fsaverage</em> subject in
FreeSurfer. For example, one can look at how MNE-Python deals with iEEG data
at <a class="reference external" href="https://mne.tools/stable/auto_tutorials/misc/plot_seeg.html">Working with SEEG</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://mne.tools/dev/generated/mne.channels.DigMontage.html#mne.channels.DigMontage" title="mne.channels.DigMontage" class="sphx-glr-backref-module-mne-channels sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">montage</span></a> <span class="o">=</span> <a href="https://mne.tools/dev/generated/mne.channels.make_dig_montage.html#mne.channels.make_dig_montage" title="mne.channels.make_dig_montage" class="sphx-glr-backref-module-mne-channels sphx-glr-backref-type-py-function"><span class="n">mne</span><span class="o">.</span><span class="n">channels</span><span class="o">.</span><span class="n">make_dig_montage</span></a><span class="p">(</span><span class="n">ch_pos</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">ch_names</span></a><span class="p">,</span> <a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">elec</span></a><span class="p">)),</span>
                                        <span class="n">coord_frame</span><span class="o">=</span><span class="s1">&#39;mni_tal&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Created </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">ch_names</span></a><span class="p">)</span><span class="si">}</span><span class="s1"> channel positions&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">ch_names</span></a><span class="p">,</span> <a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">elec</span></a><span class="p">)))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Created 64 channel positions
{&#39;C1&#39;: array([-0.0132, -0.0654,  0.0702]), &#39;C2&#39;: array([-0.0145, -0.0594,  0.0781]), &#39;C3&#39;: array([-0.0156, -0.0518,  0.0838]), &#39;C4&#39;: array([-0.0154, -0.0453,  0.0895]), &#39;C5&#39;: array([-0.0149, -0.0385,  0.094 ]), &#39;C6&#39;: array([-0.0131, -0.029 ,  0.0985]), &#39;C7&#39;: array([-0.0136, -0.0203,  0.1009]), &#39;C8&#39;: array([-0.0109, -0.0093,  0.1035]), &#39;C9&#39;: array([-0.0215, -0.0664,  0.0691]), &#39;C10&#39;: array([-0.0233, -0.0607,  0.0769]), &#39;C11&#39;: array([-0.0247, -0.0534,  0.0822]), &#39;C12&#39;: array([-0.0263, -0.0461,  0.0871]), &#39;C13&#39;: array([-0.0261, -0.0383,  0.0918]), &#39;C14&#39;: array([-0.0253, -0.0299,  0.0949]), &#39;C15&#39;: array([-0.0233, -0.0193,  0.0989]), &#39;C16&#39;: array([-0.0211, -0.008 ,  0.1026]), &#39;C17&#39;: array([-0.0304, -0.0674,  0.0678]), &#39;C18&#39;: array([-0.0328, -0.061 ,  0.0738]), &#39;C19&#39;: array([-0.0337, -0.0539,  0.0793]), &#39;C20&#39;: array([-0.0344, -0.0466,  0.0842]), &#39;C21&#39;: array([-0.0363, -0.0388,  0.0878]), &#39;C22&#39;: array([-0.0345, -0.0288,  0.0926]), &#39;C23&#39;: array([-0.0335, -0.018 ,  0.0955]), &#39;C24&#39;: array([-0.0299, -0.008 ,  0.0977]), &#39;C25&#39;: array([-0.0395, -0.0661,  0.0632]), &#39;C26&#39;: array([-0.0417, -0.0599,  0.069 ]), &#39;C27&#39;: array([-0.0426, -0.0529,  0.0744]), &#39;C28&#39;: array([-0.0438, -0.0456,  0.0795]), &#39;C29&#39;: array([-0.0457, -0.0376,  0.083 ]), &#39;C30&#39;: array([-0.0446, -0.0273,  0.0881]), &#39;C31&#39;: array([-0.043 , -0.0176,  0.0901]), &#39;C32&#39;: array([-0.0396, -0.0063,  0.0884]), &#39;C33&#39;: array([-0.0446, -0.0657,  0.0581]), &#39;C34&#39;: array([-0.0482, -0.0593,  0.0632]), &#39;C35&#39;: array([-0.0505, -0.0523,  0.0694]), &#39;C36&#39;: array([-0.0536, -0.0438,  0.0731]), &#39;C37&#39;: array([-0.0548, -0.0357,  0.0769]), &#39;C38&#39;: array([-0.0533, -0.0254,  0.0808]), &#39;C39&#39;: array([-0.0512, -0.0156,  0.0823]), &#39;C40&#39;: array([-0.0473, -0.0044,  0.0808]), &#39;C41&#39;: array([-0.0518, -0.0637,  0.0513]), &#39;C42&#39;: array([-0.055 , -0.0572,  0.0574]), &#39;C43&#39;: array([-0.0575, -0.0501,  0.0625]), &#39;C44&#39;: array([-0.0606, -0.0414,  0.0666]), &#39;C45&#39;: array([-0.0614, -0.0334,  0.0709]), &#39;C46&#39;: array([-0.0612, -0.023 ,  0.0733]), &#39;C47&#39;: array([-0.0589, -0.0135,  0.0743]), &#39;C48&#39;: array([-0.0553, -0.0025,  0.0739]), &#39;C49&#39;: array([-0.0575, -0.0605,  0.0455]), &#39;C50&#39;: array([-0.0615, -0.0536,  0.05  ]), &#39;C51&#39;: array([-0.0635, -0.0474,  0.0554]), &#39;C52&#39;: array([-0.066 , -0.0385,  0.0584]), &#39;C53&#39;: array([-0.0671, -0.0306,  0.063 ]), &#39;C54&#39;: array([-0.0672, -0.0204,  0.0644]), &#39;C55&#39;: array([-0.0643, -0.0112,  0.0638]), &#39;C56&#39;: array([-0.0602, -0.0007,  0.064 ]), &#39;C57&#39;: array([-0.0614, -0.0574,  0.0372]), &#39;C58&#39;: array([-0.0659, -0.05  ,  0.0412]), &#39;C59&#39;: array([-0.0681, -0.0434,  0.0463]), &#39;C60&#39;: array([-0.0694, -0.0357,  0.0503]), &#39;C61&#39;: array([-0.0704, -0.0277,  0.053 ]), &#39;C62&#39;: array([-0.0705, -0.0177,  0.0541]), &#39;C63&#39;: array([-0.068 , -0.0074,  0.053 ]), &#39;C64&#39;: array([-0.0642,  0.0016,  0.0539])}
</pre></div>
</div>
<p>We will load a <a class="reference external" href="https://mne.tools/dev/generated/mne.io.Raw.html#mne.io.Raw" title="(in MNE v0.23.dev0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">mne.io.Raw</span></code></a> object and
use the montage we created.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://mne.tools/dev/generated/mne.Info.html#mne.Info" title="mne.Info" class="sphx-glr-backref-module-mne sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">info</span></a> <span class="o">=</span> <a href="https://mne.tools/dev/generated/mne.create_info.html#mne.create_info" title="mne.create_info" class="sphx-glr-backref-module-mne sphx-glr-backref-type-py-function"><span class="n">mne</span><span class="o">.</span><span class="n">create_info</span></a><span class="p">(</span><a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">ch_names</span></a><span class="p">,</span> <span class="mf">1000.</span><span class="p">,</span> <span class="s1">&#39;ecog&#39;</span><span class="p">)</span>
<span class="n">raw</span> <span class="o">=</span> <a href="https://mne.tools/dev/generated/mne.io.read_raw_edf.html#mne.io.read_raw_edf" title="mne.io.read_raw_edf" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-function"><span class="n">mne</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_raw_edf</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">misc_path</span></a> <span class="o">+</span> <span class="s1">&#39;/ecog/sample_ecog.edf&#39;</span><span class="p">)</span>
<a href="https://mne.tools/dev/generated/mne.Info.html#mne.Info" title="mne.Info" class="sphx-glr-backref-module-mne sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">raw</span><span class="o">.</span><span class="n">info</span></a><span class="p">[</span><span class="s1">&#39;line_freq&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">60</span>  <span class="c1"># specify power line frequency as required by BIDS</span>
<a href="https://mne.tools/dev/generated/mne.io.BaseRaw.html#mne.io.BaseRaw.set_channel_types" title="mne.io.BaseRaw.set_channel_types" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-method"><span class="n">raw</span><span class="o">.</span><span class="n">set_channel_types</span></a><span class="p">({</span><span class="n">ch</span><span class="p">:</span> <span class="s1">&#39;ecog&#39;</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <a href="https://mne.tools/dev/generated/mne.io.BaseRaw.html#mne.io.BaseRaw.ch_names" title="mne.io.BaseRaw.ch_names" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-method"><span class="n">raw</span><span class="o">.</span><span class="n">ch_names</span></a><span class="p">})</span>

<span class="c1"># set the bad channels</span>
<a href="https://mne.tools/dev/generated/mne.Info.html#mne.Info" title="mne.Info" class="sphx-glr-backref-module-mne sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">raw</span><span class="o">.</span><span class="n">info</span></a><span class="p">[</span><span class="s1">&#39;bads&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;BTM1&#39;</span><span class="p">,</span> <span class="s1">&#39;BTM2&#39;</span><span class="p">,</span> <span class="s1">&#39;BTM3&#39;</span><span class="p">,</span> <span class="s1">&#39;BTM4&#39;</span><span class="p">,</span> <span class="s1">&#39;BTM5&#39;</span><span class="p">,</span> <span class="s1">&#39;BTM6&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;BTP1&#39;</span><span class="p">,</span> <span class="s1">&#39;BTP2&#39;</span><span class="p">,</span> <span class="s1">&#39;BTP3&#39;</span><span class="p">,</span> <span class="s1">&#39;BTP4&#39;</span><span class="p">,</span> <span class="s1">&#39;BTP5&#39;</span><span class="p">,</span> <span class="s1">&#39;BTP6&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;EKGL&#39;</span><span class="p">,</span> <span class="s1">&#39;EKGR&#39;</span><span class="p">])</span>

<span class="c1"># set montage</span>
<a href="https://mne.tools/dev/generated/mne.io.BaseRaw.html#mne.io.BaseRaw.set_montage" title="mne.io.BaseRaw.set_montage" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-method"><span class="n">raw</span><span class="o">.</span><span class="n">set_montage</span></a><span class="p">(</span><a href="https://mne.tools/dev/generated/mne.channels.DigMontage.html#mne.channels.DigMontage" title="mne.channels.DigMontage" class="sphx-glr-backref-module-mne-channels sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">montage</span></a><span class="p">,</span> <span class="n">on_missing</span><span class="o">=</span><span class="s1">&#39;warn&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Extracting EDF parameters from /home/circleci/mne_data/MNE-misc-data/ecog/sample_ecog.edf...
EDF file detected
Setting channel info structure...
Creating raw.info structure...
/home/circleci/project/examples/convert_ieeg_to_bids.py:113: RuntimeWarning: Fiducial point nasion not found, assuming identity unknown to head transformation
  raw.set_montage(montage, on_missing=&#39;warn&#39;)
/home/circleci/project/examples/convert_ieeg_to_bids.py:113: RuntimeWarning: DigMontage is only a subset of info. There are 14 channel positions not present in the DigMontage. The required channels are:

[&#39;BTM1&#39;, &#39;BTM2&#39;, &#39;BTM3&#39;, &#39;BTM4&#39;, &#39;BTM5&#39;, &#39;BTM6&#39;, &#39;BTP1&#39;, &#39;BTP2&#39;, &#39;BTP3&#39;, &#39;BTP4&#39;, &#39;BTP5&#39;, &#39;BTP6&#39;, &#39;EKGL&#39;, &#39;EKGR&#39;].

Consider using inst.set_channel_types if these are not EEG channels, or use the on_missing parameter if the channel positions are allowed to be unknown in your analyses.
  raw.set_montage(montage, on_missing=&#39;warn&#39;)
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">


<table class="table table-hover">
    <tr>
        <th>Measurement date</th>
        <td>January 12, 2000  12:01:01 GMT</td>

    </tr>
    <tr>
        <th>Experimenter</th>
<td>Unknown</td>
    </tr>
        <th>Participant</th>
<td>Unknown</td>
    </tr>
    <tr>
        <th>Digitized points</th>
        <td>64 points</td>
    </tr>
    <tr>
        <th>Good channels</th>
        <td>0 magnetometer, 0 gradiometer,
            and 0 EEG channels</td>
    </tr>
    <tr>
        <th>Bad channels</th>
        <td>BTM1, BTM2, BTM3, BTM4, BTM5, BTM6, BTP1, BTP2, BTP3, BTP4, BTP5, BTP6, EKGL, EKGR</td>

    </tr>
    <tr>
        <th>EOG channels</th>
        <td>Not available</td>
    </tr>
    <tr>
        <th>ECG channels</th>
        <td>Not available</td>
    <tr>
        <th>Sampling frequency</th>
        <td>999.41 Hz</td>
    </tr>
    <tr>
        <th>Highpass</th>
        <td>0.00 Hz</td>
    </tr>
     <tr>
        <th>Lowpass</th>
        <td>499.71 Hz</td>
    </tr>

    <tr>
        <th>Filenames</th>
        <td>sample_ecog.edf</td>
    </tr>
    <tr>
        <th>Duration</th>
        <td>00:00:21 (HH:MM:SS)</td>
    </tr>
</table>

</div>
<br />
<br /><p>Let us confirm what our channel coordinates look like.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># make a plot of the sensors in 2D plane</span>
<a href="https://mne.tools/dev/generated/mne.io.BaseRaw.html#mne.io.BaseRaw.plot_sensors" title="mne.io.BaseRaw.plot_sensors" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-method"><span class="n">raw</span><span class="o">.</span><span class="n">plot_sensors</span></a><span class="p">(</span><span class="n">ch_type</span><span class="o">=</span><span class="s1">&#39;ecog&#39;</span><span class="p">)</span>

<span class="c1"># Get the first 5 channels and show their locations.</span>
<a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">picks</span></a> <span class="o">=</span> <a href="https://mne.tools/dev/generated/mne.pick_types.html#mne.pick_types" title="mne.pick_types" class="sphx-glr-backref-module-mne sphx-glr-backref-type-py-function"><span class="n">mne</span><span class="o">.</span><span class="n">pick_types</span></a><span class="p">(</span><a href="https://mne.tools/dev/generated/mne.Info.html#mne.Info" title="mne.Info" class="sphx-glr-backref-module-mne sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">raw</span><span class="o">.</span><span class="n">info</span></a><span class="p">,</span> <span class="n">ecog</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">dig</span></a> <span class="o">=</span> <span class="p">[</span><a href="https://mne.tools/dev/generated/mne.Info.html#mne.Info" title="mne.Info" class="sphx-glr-backref-module-mne sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">raw</span><span class="o">.</span><span class="n">info</span></a><span class="p">[</span><span class="s1">&#39;dig&#39;</span><span class="p">][</span><span class="n">pick</span><span class="p">]</span> <span class="k">for</span> <span class="n">pick</span> <span class="ow">in</span> <a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">picks</span></a><span class="p">]</span>
<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">chs</span></a> <span class="o">=</span> <span class="p">[</span><a href="https://mne.tools/dev/generated/mne.Info.html#mne.Info" title="mne.Info" class="sphx-glr-backref-module-mne sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">raw</span><span class="o">.</span><span class="n">info</span></a><span class="p">[</span><span class="s1">&#39;chs&#39;</span><span class="p">][</span><span class="n">pick</span><span class="p">]</span> <span class="k">for</span> <span class="n">pick</span> <span class="ow">in</span> <a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">picks</span></a><span class="p">]</span>
<a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">pos</span></a> <span class="o">=</span> <a href="https://numpy.org/devdocs/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="n">ch</span><span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">dig</span></a><span class="p">[:</span><span class="mi">5</span><span class="p">]])</span>
<a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">ch_names</span></a> <span class="o">=</span> <a href="https://numpy.org/devdocs/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="n">ch</span><span class="p">[</span><span class="s1">&#39;ch_name&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">chs</span></a><span class="p">[:</span><span class="mi">5</span><span class="p">]])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The channel coordinates before writing into BIDS: &quot;</span><span class="p">)</span>
<a href="https://docs.python.org/3/library/pprint.html#pprint.pprint" title="pprint.pprint" class="sphx-glr-backref-module-pprint sphx-glr-backref-type-py-function"><span class="n">pprint</span></a><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">ch_names</span></a><span class="p">,</span> <a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">pos</span></a><span class="p">)])</span>
</pre></div>
</div>
<img alt="convert ieeg to bids" class="sphx-glr-single-img" src="../_images/sphx_glr_convert_ieeg_to_bids_001.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>The channel coordinates before writing into BIDS:
[(&#39;C1&#39;, array([-0.0132, -0.0654,  0.0702])),
 (&#39;C2&#39;, array([-0.0145, -0.0594,  0.0781])),
 (&#39;C3&#39;, array([-0.0156, -0.0518,  0.0838])),
 (&#39;C4&#39;, array([-0.0154, -0.0453,  0.0895])),
 (&#39;C5&#39;, array([-0.0149, -0.0385,  0.094 ]))]
</pre></div>
</div>
</div>
<div class="section" id="bids-vs-mne-python-coordinate-systems">
<h2>BIDS vs MNE-Python Coordinate Systems<a class="headerlink" href="#bids-vs-mne-python-coordinate-systems" title="Permalink to this headline">¶</a></h2>
<p>BIDS has many acceptable coordinate systems for iEEG, which can be viewed in
<a class="reference external" href="https://bids-specification.readthedocs.io/en/stable/99-appendices/08-coordinate-systems.html">appendix VIII</a> of the BIDS specification.
However, MNE-BIDS depends on MNE-Python and MNE-Python does not support all
these coordinate systems (yet).</p>
<p>MNE-Python has a few tutorials on this topic:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://mne.tools/dev/auto_tutorials/source-modeling/plot_background_freesurfer_mne">background on FreeSurfer</a></p></li>
<li><p><a class="reference external" href="https://mne.tools/dev/auto_tutorials/source-modeling/plot_source_alignment.html">MNE-Python coordinate frames</a></p></li>
</ul>
<p>Currently, MNE-Python supports the <code class="docutils literal notranslate"><span class="pre">mni_tal</span></code> coordinate frame, which
corresponds to the <code class="docutils literal notranslate"><span class="pre">fsaverage</span></code> BIDS coordinate system. All other coordinate
frames in MNE-Python if written with <a class="reference internal" href="../generated/mne_bids.write_raw_bids.html#mne_bids.write_raw_bids" title="mne_bids.write_raw_bids"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne_bids.write_raw_bids()</span></code></a> are
written with coordinate system <code class="docutils literal notranslate"><span class="pre">'Other'</span></code>. Note, then we suggest using
<a class="reference internal" href="../generated/mne_bids.update_sidecar_json.html#mne_bids.update_sidecar_json" title="mne_bids.update_sidecar_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne_bids.update_sidecar_json()</span></code></a> to update the sidecar
<code class="docutils literal notranslate"><span class="pre">*_coordsystem.json</span></code> file to add additional information.</p>
</div>
<div class="section" id="step-2-formatting-as-bids">
<h2>Step 2: Formatting as BIDS<a class="headerlink" href="#step-2-formatting-as-bids" title="Permalink to this headline">¶</a></h2>
<p>Now, let us format the <em class="xref py py-obj">Raw</em> object into BIDS.</p>
<p>With this step, we have everything to start a new BIDS directory using
our data. To do that, we can use <a class="reference internal" href="../generated/mne_bids.write_raw_bids.html#mne_bids.write_raw_bids" title="mne_bids.write_raw_bids"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_raw_bids()</span></code></a>
Generally, <a class="reference internal" href="../generated/mne_bids.write_raw_bids.html#mne_bids.write_raw_bids" title="mne_bids.write_raw_bids"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_raw_bids()</span></code></a> tries to extract as much
meta data as possible from the raw data and then formats it in a BIDS
compatible way. <a class="reference internal" href="../generated/mne_bids.write_raw_bids.html#mne_bids.write_raw_bids" title="mne_bids.write_raw_bids"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_raw_bids()</span></code></a> takes a bunch of inputs, most of
which are however optional. The required inputs are:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">raw</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">bids_basename</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">bids_root</span></code></p></li>
</ul>
<p>… as you can see in the docstring:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><a href="../generated/mne_bids.write_raw_bids.html#mne_bids.write_raw_bids" title="mne_bids.write_raw_bids" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-function"><span class="n">write_raw_bids</span></a><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Save raw data to a BIDS-compliant folder structure.

    .. warning:: * The original file is simply copied over if the original
                   file format is BIDS-supported for that datatype. Otherwise,
                   this function will convert to a BIDS-supported file format
                   while warning the user. For EEG and iEEG data, conversion
                   will be to BrainVision format; for MEG, conversion will be
                   to FIFF.

                 * ``mne-bids`` will infer the manufacturer information
                   from the file extension. If your file format is non-standard
                   for the manufacturer, please update the manufacturer field
                   in the sidecars manually.

    Parameters
    ----------
    raw : mne.io.Raw
        The raw data. It must be an instance of `mne.io.Raw`. The data
        should not be loaded from disk, i.e., ``raw.preload`` must be
        ``False``.
    bids_path : mne_bids.BIDSPath
        The file to write. The `mne_bids.BIDSPath` instance passed here
        **must** have the ``.root`` attribute set. If the ``.datatype``
        attribute is not set, it will be inferred from the recording data type
        found in ``raw``.
        Example::

            bids_path = BIDSPath(subject=&#39;01&#39;, session=&#39;01&#39;, task=&#39;testing&#39;,
                                 acquisition=&#39;01&#39;, run=&#39;01&#39;, datatype=&#39;meg&#39;,
                                 root=&#39;/data/BIDS&#39;)

        This will write the following files in the correct subfolder ``root``::

            sub-01_ses-01_task-testing_acq-01_run-01_meg.fif
            sub-01_ses-01_task-testing_acq-01_run-01_meg.json
            sub-01_ses-01_task-testing_acq-01_run-01_channels.tsv
            sub-01_ses-01_acq-01_coordsystem.json

        and the following one if ``events_data`` is not ``None``::

            sub-01_ses-01_task-testing_acq-01_run-01_events.tsv

        and add a line to the following files::

            participants.tsv
            scans.tsv

        Note that the data type is automatically inferred from the raw
        object, as well as the extension. Data with MEG and other
        electrophysiology data in the same file will be stored as ``&#39;meg&#39;``.
    events_data : path-like | np.ndarray | None
        Use this parameter to specify events to write to the ``*_events.tsv``
        sidecar file, additionally to the object&#39;s `mne.Annotations` (which
        are always written).
        If a path, specifies the location of an MNE events file.
        If an array, the MNE events array (shape: ``(n_events, 3)``).
        If a path or an array and ``raw.annotations`` exist, the union of
        ``event_data`` and ``raw.annotations`` will be written.
        Corresponding descriptions for all event IDs (listed in the third
        column of the MNE events array) must be specified via the ``event_id``
        parameter; otherwise, an exception is raised.
        If ``None``, events will only be inferred from the the raw object&#39;s
        `mne.Annotations`.

        .. note::
           If ``not None``, writes the union of ``events_data`` and
           ``raw.annotations``. If you wish to **only** write
           ``raw.annotations``, pass ``events_data=None``. If you want to
           **exclude** the events in ``raw.annotations`` from being written,
           call ``raw.set_annotations(None)`` before invoking this function.

        .. note::
           Descriptions of all event IDs must be specified via the ``event_id``
           parameter.

    event_id : dict | None
        Descriptions of all event IDs, if you passed ``events_data``.
        The descriptions will be written to the ``trial_type`` column in
        ``*_events.tsv``. The dictionary keys correspond to the event
        descriptions and the values to the event IDs. You must specify a
        description for all event IDs in ``events_data``.
    anonymize : dict | None
        If `None` (default), no anonymization is performed.
        If a dictionary, data will be anonymized depending on the dictionary
        keys: ``daysback`` is a required key, ``keep_his`` is optional.

        ``daysback`` : int
            Number of days by which to move back the recording date in time.
            In studies with multiple subjects the relative recording date
            differences between subjects can be kept by using the same number
            of ``daysback`` for all subject anonymizations. ``daysback`` should
            be great enough to shift the date prior to 1925 to conform with
            BIDS anonymization rules.

        ``keep_his`` : bool
            If ``False`` (default), all subject information next to the
            recording date will be overwritten as well. If True, keep subject
            information apart from the recording date.

    format : &#39;auto&#39; | &#39;BrainVision&#39; | &#39;FIF&#39;
        Controls the file format of the data after BIDS conversion. If
        ``&#39;auto&#39;``, MNE-BIDS will attempt to convert the input data to BIDS
        without a change of the original file format. A conversion to a
        different file format (BrainVision, or FIF) will only take place when
        the original file format lacks some necessary features. When a str is
        passed, a conversion can be forced to the BrainVision format for EEG,
        or the FIF format for MEG data.
    overwrite : bool
        Whether to overwrite existing files or data in files.
        Defaults to ``False``.

        If ``True``, any existing files with the same BIDS parameters
        will be overwritten with the exception of the ``*_participants.tsv``
        and ``*_scans.tsv`` files. For these files, parts of pre-existing data
        that match the current data will be replaced. For
        ``*_participants.tsv``, specifically, age, sex and hand fields will be
        overwritten, while any manually added fields in ``participants.json``
        and ``participants.tsv`` by a user will be retained.
        If ``False``, no existing data will be overwritten or
        replaced.
    verbose : bool
        If ``True``, this will print a snippet of the sidecar files. Otherwise,
        no content will be printed.

    Returns
    -------
    bids_path : mne_bids.BIDSPath
        The path of the created data file.

    Notes
    -----
    You should ensure that ``raw.info[&#39;subject_info&#39;]`` and
    ``raw.info[&#39;meas_date&#39;]`` are set to proper (not-``None``) values to allow
    for the correct computation of each participant&#39;s age when creating
    ``*_participants.tsv``.

    This function will convert existing `mne.Annotations` from
    ``raw.annotations`` to events. Additionally, any events supplied via
    ``events_data`` will be written too. To avoid writing of annotations,
    remove them from the raw file via ``raw.set_annotations(None)`` before
    invoking ``write_raw_bids``.

    To write events encoded in a ``STIM`` channel, you first need to create the
    events array manually and pass it to this function:

    ..
        events = mne.find_events(raw, min_duration=0.002)
        write_raw_bids(..., events_data=events)

    See the documentation of `mne.find_events` for more information on event
    extraction from ``STIM`` channels.

    When anonymizing ``.edf`` files, then the file format for EDF limits
    how far back we can set the recording date. Therefore, all anonymized
    EDF datasets will have an internal recording date of ``01-01-1985``,
    and the actual recording date will be stored in the ``scans.tsv``
    file&#39;s ``acq_time`` column.

    See Also
    --------
    mne.io.Raw.anonymize
    mne.find_events
    mne.Annotations
    mne.events_from_annotations
</pre></div>
</div>
<p>Let us initialize some of the necessary data for the subject.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># There is a subject, and specific task for the dataset.</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subject_id</span></a> <span class="o">=</span> <span class="s1">&#39;001&#39;</span>  <span class="c1"># zero padding to account for &gt;100 subjects in this dataset</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">task</span></a> <span class="o">=</span> <span class="s1">&#39;testresteyes&#39;</span>

<span class="c1"># get MNE-Python directory w/ example data</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">mne_data_dir</span></a> <span class="o">=</span> <a href="https://mne.tools/dev/generated/mne.get_config.html#mne.get_config" title="mne.get_config" class="sphx-glr-backref-module-mne sphx-glr-backref-type-py-function"><span class="n">mne</span><span class="o">.</span><span class="n">get_config</span></a><span class="p">(</span><span class="s1">&#39;MNE_DATASETS_MISC_PATH&#39;</span><span class="p">)</span>

<span class="c1"># There is the root directory for where we will write our data.</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_root</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="os.path.join" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">op</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">mne_data_dir</span></a><span class="p">,</span> <span class="s1">&#39;ieegmmidb_bids&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>To ensure the output path doesn’t contain any leftover files from previous
tests and example runs, we simply delete it.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not delete directories that may contain important data!</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.exists" title="os.path.exists" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">op</span><span class="o">.</span><span class="n">exists</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_root</span></a><span class="p">):</span>
    <a href="https://docs.python.org/3/library/shutil.html#shutil.rmtree" title="shutil.rmtree" class="sphx-glr-backref-module-shutil sphx-glr-backref-type-py-function"><span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_root</span></a><span class="p">)</span>
</pre></div>
</div>
<p>Now we just need to specify a few iEEG details to make things work:
We need the basename of the dataset. In addition, <a class="reference internal" href="../generated/mne_bids.write_raw_bids.html#mne_bids.write_raw_bids" title="mne_bids.write_raw_bids"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_raw_bids()</span></code></a>
requires the <code class="docutils literal notranslate"><span class="pre">.filenames</span></code> attribute of the Raw object to be non-empty,
so since we
initialized the dataset from an array, we need to do a hack where we
temporarily save the data to disc before reading it back in.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Now convert our data to be in a new BIDS dataset.</span>
<a href="../generated/mne_bids.BIDSPath.html#mne_bids.BIDSPath" title="mne_bids.BIDSPath" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_path</span></a> <span class="o">=</span> <a href="../generated/mne_bids.BIDSPath.html#mne_bids.BIDSPath" title="mne_bids.BIDSPath" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-class"><span class="n">BIDSPath</span></a><span class="p">(</span><span class="n">subject</span><span class="o">=</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subject_id</span></a><span class="p">,</span>
                     <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">task</span></a><span class="o">=</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">task</span></a><span class="p">,</span> <span class="n">acquisition</span><span class="o">=</span><span class="s2">&quot;ecog&quot;</span><span class="p">,</span> <span class="n">root</span><span class="o">=</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_root</span></a><span class="p">)</span>

<span class="c1"># write `raw` to BIDS and anonymize it into BrainVision format</span>
<a href="../generated/mne_bids.write_raw_bids.html#mne_bids.write_raw_bids" title="mne_bids.write_raw_bids" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-function"><span class="n">write_raw_bids</span></a><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <a href="../generated/mne_bids.BIDSPath.html#mne_bids.BIDSPath" title="mne_bids.BIDSPath" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_path</span></a><span class="p">,</span> <span class="n">anonymize</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">daysback</span><span class="o">=</span><span class="mi">30000</span><span class="p">),</span>
               <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Extracting EDF parameters from /home/circleci/mne_data/MNE-misc-data/ecog/sample_ecog.edf...
EDF file detected
Setting channel info structure...
Creating raw.info structure...

Writing &#39;/home/circleci/mne_data/ieegmmidb_bids/README&#39;...

References
----------
Appelhoff, S., Sanderson, M., Brooks, T., Vliet, M., Quentin, R., Holdgraf, C., Chaumon, M., Mikulan, E., Tavabi, K., Höchenberger, R., Welke, D., Brunner, C., Rockhill, A., Larson, E., Gramfort, A. and Jas, M. (2019). MNE-BIDS: Organizing electrophysiological data into the BIDS format and facilitating their analysis. Journal of Open Source Software 4: (1896). https://doi.org/10.21105/joss.01896

Holdgraf, C., Appelhoff, S., Bickel, S., Bouchard, K., D&#39;Ambrosio, S., David, O., … Hermes, D. (2019). iEEG-BIDS, extending the Brain Imaging Data Structure specification to human intracranial electrophysiology. Scientific Data, 6, 102. https://doi.org/10.1038/s41597-019-0105-7


Writing &#39;/home/circleci/mne_data/ieegmmidb_bids/participants.tsv&#39;...

participant_id  age     sex     hand
sub-001 n/a     n/a     n/a

Writing &#39;/home/circleci/mne_data/ieegmmidb_bids/participants.json&#39;...

{
    &quot;participant_id&quot;: {
        &quot;Description&quot;: &quot;Unique participant identifier&quot;
    },
    &quot;age&quot;: {
        &quot;Description&quot;: &quot;Age of the participant at time of testing&quot;,
        &quot;Units&quot;: &quot;years&quot;
    },
    &quot;sex&quot;: {
        &quot;Description&quot;: &quot;Biological sex of the participant&quot;,
        &quot;Levels&quot;: {
            &quot;F&quot;: &quot;female&quot;,
            &quot;M&quot;: &quot;male&quot;
        }
    },
    &quot;hand&quot;: {
        &quot;Description&quot;: &quot;Handedness of the participant&quot;,
        &quot;Levels&quot;: {
            &quot;R&quot;: &quot;right&quot;,
            &quot;L&quot;: &quot;left&quot;,
            &quot;A&quot;: &quot;ambidextrous&quot;
        }
    }
}
Writing electrodes file to...  /home/circleci/mne_data/ieegmmidb_bids/sub-001/ieeg/sub-001_acq-ecog_electrodes.tsv
Writing coordsytem file to...  /home/circleci/mne_data/ieegmmidb_bids/sub-001/ieeg/sub-001_acq-ecog_coordsystem.json

Writing &#39;/home/circleci/mne_data/ieegmmidb_bids/sub-001/ieeg/sub-001_acq-ecog_space-fsaverage_electrodes.tsv&#39;...

name    x       y       z       size
C1      -0.0132 -0.0654 0.0702  n/a
C2      -0.0145 -0.0594 0.0781  n/a
C3      -0.0156 -0.0518 0.0838  n/a
C4      -0.0154 -0.0453 0.0895  n/a
C5      -0.0149 -0.0385 0.094   n/a

Writing &#39;/home/circleci/mne_data/ieegmmidb_bids/sub-001/ieeg/sub-001_acq-ecog_space-fsaverage_coordsystem.json&#39;...

{
    &quot;iEEGCoordinateSystem&quot;: &quot;fsaverage&quot;,
    &quot;iEEGCoordinateSystemDescription&quot;: &quot;Defined by FreeSurfer, the MRI (surface RAS) origin is at the center of a 256\u00d7256\u00d7256 mm^3 anisotropic volume (may not be in the center of the head).&quot;,
    &quot;iEEGCoordinateUnits&quot;: &quot;m&quot;
}

Writing &#39;/home/circleci/mne_data/ieegmmidb_bids/sub-001/ieeg/sub-001_task-testresteyes_acq-ecog_events.tsv&#39;...

onset   duration        trial_type      value   sample
10.229013529411764      0.0     eeg sz start    1       10223

Writing &#39;/home/circleci/mne_data/ieegmmidb_bids/dataset_description.json&#39;...

{
    &quot;Name&quot;: &quot; &quot;,
    &quot;BIDSVersion&quot;: &quot;1.4.0&quot;,
    &quot;DatasetType&quot;: &quot;raw&quot;,
    &quot;Authors&quot;: [
        &quot;Please cite MNE-BIDS in your publication before removing this (citations in README)&quot;
    ]
}

Writing &#39;/home/circleci/mne_data/ieegmmidb_bids/sub-001/ieeg/sub-001_task-testresteyes_acq-ecog_ieeg.json&#39;...

{
    &quot;TaskName&quot;: &quot;testresteyes&quot;,
    &quot;Manufacturer&quot;: &quot;n/a&quot;,
    &quot;PowerLineFrequency&quot;: 60,
    &quot;SamplingFrequency&quot;: 999.4121105232217,
    &quot;SoftwareFilters&quot;: &quot;n/a&quot;,
    &quot;RecordingDuration&quot;: 21.669739411764706,
    &quot;RecordingType&quot;: &quot;continuous&quot;,
    &quot;iEEGReference&quot;: &quot;n/a&quot;,
    &quot;ECOGChannelCount&quot;: 78,
    &quot;SEEGChannelCount&quot;: 0,
    &quot;EEGChannelCount&quot;: 0,
    &quot;EOGChannelCount&quot;: 0,
    &quot;ECGChannelCount&quot;: 0,
    &quot;EMGChannelCount&quot;: 0,
    &quot;MiscChannelCount&quot;: 0,
    &quot;TriggerChannelCount&quot;: 0
}

Writing &#39;/home/circleci/mne_data/ieegmmidb_bids/sub-001/ieeg/sub-001_task-testresteyes_acq-ecog_channels.tsv&#39;...

name    type    units   low_cutoff      high_cutoff     description     sampling_frequency      status  status_description
C1      ECOG    µV      0.0     499.70605526161086      Electrocorticography    999.4121105232217       good    n/a
C2      ECOG    µV      0.0     499.70605526161086      Electrocorticography    999.4121105232217       good    n/a
C3      ECOG    µV      0.0     499.70605526161086      Electrocorticography    999.4121105232217       good    n/a
C4      ECOG    µV      0.0     499.70605526161086      Electrocorticography    999.4121105232217       good    n/a
C5      ECOG    µV      0.0     499.70605526161086      Electrocorticography    999.4121105232217       good    n/a
Copying data files to sub-001_task-testresteyes_acq-ecog_ieeg.edf
/home/circleci/project/mne_bids/write.py:1355: RuntimeWarning: EDF/EDF+/BDF files contain two fields for recording dates.Due to file format limitations, one of these fields only supports 2-digit years. The date for that field will be set to 85 (i.e., 1985), the earliest possible date. The true anonymized date is stored in the scans.tsv file.
  warn(&quot;EDF/EDF+/BDF files contain two fields for recording dates.&quot;

Writing &#39;/home/circleci/mne_data/ieegmmidb_bids/sub-001/sub-001_scans.tsv&#39;...

filename        acq_time
ieeg/sub-001_task-testresteyes_acq-ecog_ieeg.edf        1917-11-23T12:01:01.000000Z
Wrote /home/circleci/mne_data/ieegmmidb_bids/sub-001/sub-001_scans.tsv entry with ieeg/sub-001_task-testresteyes_acq-ecog_ieeg.edf.

BIDSPath(
root: /home/circleci/mne_data/ieegmmidb_bids
datatype: ieeg
basename: sub-001_task-testresteyes_acq-ecog_ieeg.edf)
</pre></div>
</div>
</div>
<div class="section" id="step-3-check-and-compare-with-standard">
<h2>Step 3: Check and compare with standard<a class="headerlink" href="#step-3-check-and-compare-with-standard" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Now we have written our BIDS directory.</span>
<a href="../generated/mne_bids.print_dir_tree.html#mne_bids.print_dir_tree" title="mne_bids.print_dir_tree" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-function"><span class="n">print_dir_tree</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_root</span></a><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>|ieegmmidb_bids/
|--- README
|--- dataset_description.json
|--- participants.json
|--- participants.tsv
|--- sub-001/
|------ sub-001_scans.tsv
|------ ieeg/
|--------- sub-001_acq-ecog_space-fsaverage_coordsystem.json
|--------- sub-001_acq-ecog_space-fsaverage_electrodes.tsv
|--------- sub-001_task-testresteyes_acq-ecog_channels.tsv
|--------- sub-001_task-testresteyes_acq-ecog_events.tsv
|--------- sub-001_task-testresteyes_acq-ecog_ieeg.edf
|--------- sub-001_task-testresteyes_acq-ecog_ieeg.json
</pre></div>
</div>
</div>
<div class="section" id="step-4-cite-mne-bids">
<h2>Step 4: Cite mne-bids<a class="headerlink" href="#step-4-cite-mne-bids" title="Permalink to this headline">¶</a></h2>
<p>We can see that the appropriate citations are already written in the README.
If you are preparing a manuscript, please make sure to also cite MNE-BIDS
there.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">readme</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="os.path.join" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">op</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_root</span></a><span class="p">,</span> <span class="s1">&#39;README&#39;</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">readme</span></a><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8-sig&#39;</span><span class="p">)</span> <span class="k">as</span> <a href="https://docs.python.org/3/library/io.html#io.TextIOWrapper" title="io.TextIOWrapper" class="sphx-glr-backref-module-io sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fid</span></a><span class="p">:</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">text</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/io.html#io.TextIOWrapper" title="io.TextIOWrapper" class="sphx-glr-backref-module-io sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fid</span></a><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">text</span></a><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>References
----------
Appelhoff, S., Sanderson, M., Brooks, T., Vliet, M., Quentin, R., Holdgraf, C., Chaumon, M., Mikulan, E., Tavabi, K., Höchenberger, R., Welke, D., Brunner, C., Rockhill, A., Larson, E., Gramfort, A. and Jas, M. (2019). MNE-BIDS: Organizing electrophysiological data into the BIDS format and facilitating their analysis. Journal of Open Source Software 4: (1896). https://doi.org/10.21105/joss.01896

Holdgraf, C., Appelhoff, S., Bickel, S., Bouchard, K., D&#39;Ambrosio, S., David, O., … Hermes, D. (2019). iEEG-BIDS, extending the Brain Imaging Data Structure specification to human intracranial electrophysiology. Scientific Data, 6, 102. https://doi.org/10.1038/s41597-019-0105-7
</pre></div>
</div>
<p>MNE-BIDS has created a suitable directory structure for us, and among other
meta data files, it started an <code class="docutils literal notranslate"><span class="pre">events.tsv`</span></code> and <code class="docutils literal notranslate"><span class="pre">channels.tsv</span></code> file,
and created an initial <code class="docutils literal notranslate"><span class="pre">dataset_description.json</span></code> file on top!</p>
<p>Now it’s time to manually check the BIDS directory and the meta files to add
all the information that MNE-BIDS could not infer. For instance, you must
describe <code class="docutils literal notranslate"><span class="pre">iEEGReference</span></code> and <code class="docutils literal notranslate"><span class="pre">iEEGGround</span></code> yourself.
It’s easy to find these by searching for <code class="docutils literal notranslate"><span class="pre">&quot;n/a&quot;</span></code> in the sidecar files.</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">grep</span> <span class="pre">-i</span> <span class="pre">'n/a'</span> <span class="pre">&lt;bids_root&gt;`</span></code></p>
<p>Remember that there is a convenient JavaScript tool to validate all your BIDS
directories called the “BIDS-validator”, available as a web version and a
command line tool:</p>
<p>Web version: <a class="reference external" href="https://bids-standard.github.io/bids-validator/">https://bids-standard.github.io/bids-validator/</a></p>
<p>Command line tool: <a class="reference external" href="https://www.npmjs.com/package/bids-validator">https://www.npmjs.com/package/bids-validator</a></p>
</div>
<div class="section" id="step-5-plot-output-channels-and-check-that-they-match">
<h2>Step 5: Plot output channels and check that they match!<a class="headerlink" href="#step-5-plot-output-channels-and-check-that-they-match" title="Permalink to this headline">¶</a></h2>
<p>Now we have written our BIDS directory. We can use
<a class="reference internal" href="../generated/mne_bids.read_raw_bids.html#mne_bids.read_raw_bids" title="mne_bids.read_raw_bids"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_raw_bids()</span></code></a> to read in the data.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># read in the BIDS dataset and plot the coordinates</span>
<span class="n">raw</span> <span class="o">=</span> <a href="../generated/mne_bids.read_raw_bids.html#mne_bids.read_raw_bids" title="mne_bids.read_raw_bids" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-function"><span class="n">read_raw_bids</span></a><span class="p">(</span><a href="../generated/mne_bids.BIDSPath.html#mne_bids.BIDSPath" title="mne_bids.BIDSPath" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_path</span></a><span class="o">=</span><a href="../generated/mne_bids.BIDSPath.html#mne_bids.BIDSPath" title="mne_bids.BIDSPath" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_path</span></a><span class="p">)</span>

<span class="c1"># get the first 5 channels and show their locations</span>
<span class="c1"># this should match what was printed earlier.</span>
<a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">picks</span></a> <span class="o">=</span> <a href="https://mne.tools/dev/generated/mne.pick_types.html#mne.pick_types" title="mne.pick_types" class="sphx-glr-backref-module-mne sphx-glr-backref-type-py-function"><span class="n">mne</span><span class="o">.</span><span class="n">pick_types</span></a><span class="p">(</span><a href="https://mne.tools/dev/generated/mne.Info.html#mne.Info" title="mne.Info" class="sphx-glr-backref-module-mne sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">raw</span><span class="o">.</span><span class="n">info</span></a><span class="p">,</span> <span class="n">ecog</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">dig</span></a> <span class="o">=</span> <span class="p">[</span><a href="https://mne.tools/dev/generated/mne.Info.html#mne.Info" title="mne.Info" class="sphx-glr-backref-module-mne sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">raw</span><span class="o">.</span><span class="n">info</span></a><span class="p">[</span><span class="s1">&#39;dig&#39;</span><span class="p">][</span><span class="n">pick</span><span class="p">]</span> <span class="k">for</span> <span class="n">pick</span> <span class="ow">in</span> <a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">picks</span></a><span class="p">]</span>
<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">chs</span></a> <span class="o">=</span> <span class="p">[</span><a href="https://mne.tools/dev/generated/mne.Info.html#mne.Info" title="mne.Info" class="sphx-glr-backref-module-mne sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">raw</span><span class="o">.</span><span class="n">info</span></a><span class="p">[</span><span class="s1">&#39;chs&#39;</span><span class="p">][</span><span class="n">pick</span><span class="p">]</span> <span class="k">for</span> <span class="n">pick</span> <span class="ow">in</span> <a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">picks</span></a><span class="p">]</span>
<a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">pos</span></a> <span class="o">=</span> <a href="https://numpy.org/devdocs/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="n">ch</span><span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">dig</span></a><span class="p">[:</span><span class="mi">5</span><span class="p">]])</span>
<a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">ch_names</span></a> <span class="o">=</span> <a href="https://numpy.org/devdocs/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="n">ch</span><span class="p">[</span><span class="s1">&#39;ch_name&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">chs</span></a><span class="p">[:</span><span class="mi">5</span><span class="p">]])</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The channel montage after writing into BIDS: &quot;</span><span class="p">)</span>
<a href="https://docs.python.org/3/library/pprint.html#pprint.pprint" title="pprint.pprint" class="sphx-glr-backref-module-pprint sphx-glr-backref-type-py-function"><span class="n">pprint</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">dig</span></a><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The channel coordinates after writing into BIDS: &quot;</span><span class="p">)</span>
<a href="https://docs.python.org/3/library/pprint.html#pprint.pprint" title="pprint.pprint" class="sphx-glr-backref-module-pprint sphx-glr-backref-type-py-function"><span class="n">pprint</span></a><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">ch_names</span></a><span class="p">,</span> <a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">pos</span></a><span class="p">)])</span>

<span class="c1"># make a plot of the sensors in 2D plane</span>
<a href="https://mne.tools/dev/generated/mne.io.BaseRaw.html#mne.io.BaseRaw.plot_sensors" title="mne.io.BaseRaw.plot_sensors" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-method"><span class="n">raw</span><span class="o">.</span><span class="n">plot_sensors</span></a><span class="p">(</span><span class="n">ch_type</span><span class="o">=</span><span class="s1">&#39;ecog&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="convert ieeg to bids" class="sphx-glr-single-img" src="../_images/sphx_glr_convert_ieeg_to_bids_002.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Extracting EDF parameters from /home/circleci/mne_data/ieegmmidb_bids/sub-001/ieeg/sub-001_task-testresteyes_acq-ecog_ieeg.edf...
EDF file detected
Setting channel info structure...
Creating raw.info structure...
Reading events from /home/circleci/mne_data/ieegmmidb_bids/sub-001/ieeg/sub-001_task-testresteyes_acq-ecog_events.tsv.
Reading channel info from /home/circleci/mne_data/ieegmmidb_bids/sub-001/ieeg/sub-001_task-testresteyes_acq-ecog_channels.tsv.
Reading in coordinate system frame fsaverage: None.
Reading electrode coords from /home/circleci/mne_data/ieegmmidb_bids/sub-001/ieeg/sub-001_acq-ecog_space-fsaverage_electrodes.tsv.
The read in electrodes file is:
 [(&#39;name&#39;, [&#39;C1&#39;, &#39;C2&#39;, &#39;C3&#39;, &#39;C4&#39;, &#39;C5&#39;, &#39;C6&#39;, &#39;C7&#39;, &#39;C8&#39;, &#39;C9&#39;, &#39;C10&#39;, &#39;C11&#39;, &#39;C12&#39;, &#39;C13&#39;, &#39;C14&#39;, &#39;C15&#39;, &#39;C16&#39;, &#39;C17&#39;, &#39;C18&#39;, &#39;C19&#39;, &#39;C20&#39;, &#39;C21&#39;, &#39;C22&#39;, &#39;C23&#39;, &#39;C24&#39;, &#39;C25&#39;, &#39;C26&#39;, &#39;C27&#39;, &#39;C28&#39;, &#39;C29&#39;, &#39;C30&#39;, &#39;C31&#39;, &#39;C32&#39;, &#39;C33&#39;, &#39;C34&#39;, &#39;C35&#39;, &#39;C36&#39;, &#39;C37&#39;, &#39;C38&#39;, &#39;C39&#39;, &#39;C40&#39;, &#39;C41&#39;, &#39;C42&#39;, &#39;C43&#39;, &#39;C44&#39;, &#39;C45&#39;, &#39;C46&#39;, &#39;C47&#39;, &#39;C48&#39;, &#39;C49&#39;, &#39;C50&#39;, &#39;C51&#39;, &#39;C52&#39;, &#39;C53&#39;, &#39;C54&#39;, &#39;C55&#39;, &#39;C56&#39;, &#39;C57&#39;, &#39;C58&#39;, &#39;C59&#39;, &#39;C60&#39;, &#39;C61&#39;, &#39;C62&#39;, &#39;C63&#39;, &#39;C64&#39;, &#39;BTM1&#39;, &#39;BTM2&#39;, &#39;BTM3&#39;, &#39;BTM4&#39;, &#39;BTM5&#39;, &#39;BTM6&#39;, &#39;BTP1&#39;, &#39;BTP2&#39;, &#39;BTP3&#39;, &#39;BTP4&#39;, &#39;BTP5&#39;, &#39;BTP6&#39;, &#39;EKGL&#39;, &#39;EKGR&#39;]), (&#39;x&#39;, [&#39;-0.0132&#39;, &#39;-0.0145&#39;, &#39;-0.0156&#39;, &#39;-0.0154&#39;, &#39;-0.0149&#39;, &#39;-0.0131&#39;, &#39;-0.0136&#39;, &#39;-0.0109&#39;, &#39;-0.0215&#39;, &#39;-0.0233&#39;, &#39;-0.0247&#39;, &#39;-0.0263&#39;, &#39;-0.0261&#39;, &#39;-0.0253&#39;, &#39;-0.0233&#39;, &#39;-0.0211&#39;, &#39;-0.0304&#39;, &#39;-0.0328&#39;, &#39;-0.0337&#39;, &#39;-0.0344&#39;, &#39;-0.0363&#39;, &#39;-0.0345&#39;, &#39;-0.0335&#39;, &#39;-0.0299&#39;, &#39;-0.0395&#39;, &#39;-0.0417&#39;, &#39;-0.0426&#39;, &#39;-0.0438&#39;, &#39;-0.0457&#39;, &#39;-0.0446&#39;, &#39;-0.043&#39;, &#39;-0.0396&#39;, &#39;-0.0446&#39;, &#39;-0.0482&#39;, &#39;-0.0505&#39;, &#39;-0.0536&#39;, &#39;-0.0548&#39;, &#39;-0.0533&#39;, &#39;-0.0512&#39;, &#39;-0.0473&#39;, &#39;-0.0518&#39;, &#39;-0.055&#39;, &#39;-0.0575&#39;, &#39;-0.0606&#39;, &#39;-0.0614&#39;, &#39;-0.0612&#39;, &#39;-0.0589&#39;, &#39;-0.0553&#39;, &#39;-0.0575&#39;, &#39;-0.0615&#39;, &#39;-0.0635&#39;, &#39;-0.066&#39;, &#39;-0.0671&#39;, &#39;-0.0672&#39;, &#39;-0.0643&#39;, &#39;-0.0602&#39;, &#39;-0.0614&#39;, &#39;-0.0659&#39;, &#39;-0.0681&#39;, &#39;-0.0694&#39;, &#39;-0.0704&#39;, &#39;-0.0705&#39;, &#39;-0.068&#39;, &#39;-0.0642&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;]), (&#39;y&#39;, [&#39;-0.0654&#39;, &#39;-0.0594&#39;, &#39;-0.0518&#39;, &#39;-0.0453&#39;, &#39;-0.0385&#39;, &#39;-0.029&#39;, &#39;-0.0203&#39;, &#39;-0.0093&#39;, &#39;-0.0664&#39;, &#39;-0.0607&#39;, &#39;-0.0534&#39;, &#39;-0.0461&#39;, &#39;-0.0383&#39;, &#39;-0.0299&#39;, &#39;-0.0193&#39;, &#39;-0.008&#39;, &#39;-0.0674&#39;, &#39;-0.061&#39;, &#39;-0.0539&#39;, &#39;-0.0466&#39;, &#39;-0.0388&#39;, &#39;-0.0288&#39;, &#39;-0.018&#39;, &#39;-0.008&#39;, &#39;-0.0661&#39;, &#39;-0.0599&#39;, &#39;-0.0529&#39;, &#39;-0.0456&#39;, &#39;-0.0376&#39;, &#39;-0.0273&#39;, &#39;-0.0176&#39;, &#39;-0.0063&#39;, &#39;-0.0657&#39;, &#39;-0.0593&#39;, &#39;-0.0523&#39;, &#39;-0.0438&#39;, &#39;-0.0357&#39;, &#39;-0.0254&#39;, &#39;-0.0156&#39;, &#39;-0.0044&#39;, &#39;-0.0637&#39;, &#39;-0.0572&#39;, &#39;-0.0501&#39;, &#39;-0.0414&#39;, &#39;-0.0334&#39;, &#39;-0.023&#39;, &#39;-0.0135&#39;, &#39;-0.0025&#39;, &#39;-0.0605&#39;, &#39;-0.0536&#39;, &#39;-0.0474&#39;, &#39;-0.0385&#39;, &#39;-0.0306&#39;, &#39;-0.0204&#39;, &#39;-0.0112&#39;, &#39;-0.0007&#39;, &#39;-0.0574&#39;, &#39;-0.05&#39;, &#39;-0.0434&#39;, &#39;-0.0357&#39;, &#39;-0.0277&#39;, &#39;-0.0177&#39;, &#39;-0.0074&#39;, &#39;0.0016&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;]), (&#39;z&#39;, [&#39;0.0702&#39;, &#39;0.0781&#39;, &#39;0.0838&#39;, &#39;0.0895&#39;, &#39;0.094&#39;, &#39;0.0985&#39;, &#39;0.1009&#39;, &#39;0.1035&#39;, &#39;0.0691&#39;, &#39;0.0769&#39;, &#39;0.0822&#39;, &#39;0.0871&#39;, &#39;0.0918&#39;, &#39;0.0949&#39;, &#39;0.0989&#39;, &#39;0.1026&#39;, &#39;0.0678&#39;, &#39;0.0738&#39;, &#39;0.0793&#39;, &#39;0.0842&#39;, &#39;0.0878&#39;, &#39;0.0926&#39;, &#39;0.0955&#39;, &#39;0.0977&#39;, &#39;0.0632&#39;, &#39;0.069&#39;, &#39;0.0744&#39;, &#39;0.0795&#39;, &#39;0.083&#39;, &#39;0.0881&#39;, &#39;0.0901&#39;, &#39;0.0884&#39;, &#39;0.0581&#39;, &#39;0.0632&#39;, &#39;0.0694&#39;, &#39;0.0731&#39;, &#39;0.0769&#39;, &#39;0.0808&#39;, &#39;0.0823&#39;, &#39;0.0808&#39;, &#39;0.0513&#39;, &#39;0.0574&#39;, &#39;0.0625&#39;, &#39;0.0666&#39;, &#39;0.0709&#39;, &#39;0.0733&#39;, &#39;0.0743&#39;, &#39;0.0739&#39;, &#39;0.0455&#39;, &#39;0.05&#39;, &#39;0.0554&#39;, &#39;0.0584&#39;, &#39;0.063&#39;, &#39;0.0644&#39;, &#39;0.0638&#39;, &#39;0.064&#39;, &#39;0.0372&#39;, &#39;0.0412&#39;, &#39;0.0463&#39;, &#39;0.0503&#39;, &#39;0.053&#39;, &#39;0.0541&#39;, &#39;0.053&#39;, &#39;0.0539&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;]), (&#39;size&#39;, [&#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;])]
/home/circleci/project/mne_bids/dig.py:519: RuntimeWarning: Fiducial point nasion not found, assuming identity unknown to head transformation
  raw.set_montage(montage, on_missing=&#39;warn&#39;, verbose=verbose)
The channel montage after writing into BIDS:
[&lt;DigPoint |     EEG #1 : (-13.2, -65.4, 70.2) mm   : MNI Talairach frame&gt;,
 &lt;DigPoint |     EEG #2 : (-14.5, -59.4, 78.1) mm   : MNI Talairach frame&gt;,
 &lt;DigPoint |     EEG #3 : (-15.6, -51.8, 83.8) mm   : MNI Talairach frame&gt;,
 &lt;DigPoint |     EEG #4 : (-15.4, -45.3, 89.5) mm   : MNI Talairach frame&gt;,
 &lt;DigPoint |     EEG #5 : (-14.9, -38.5, 94.0) mm   : MNI Talairach frame&gt;]
The channel coordinates after writing into BIDS:
[(&#39;C1&#39;, array([-0.0132, -0.0654,  0.0702])),
 (&#39;C2&#39;, array([-0.0145, -0.0594,  0.0781])),
 (&#39;C3&#39;, array([-0.0156, -0.0518,  0.0838])),
 (&#39;C4&#39;, array([-0.0154, -0.0453,  0.0895])),
 (&#39;C5&#39;, array([-0.0149, -0.0385,  0.094 ]))]

&lt;Figure size 640x640 with 1 Axes&gt;
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  3.504 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-convert-ieeg-to-bids-py">
<div class="binder-badge docutils container">
<a class="reference external image-reference" href="https://mybinder.org/v2/gh/mne-tools/mne-bids/gh-pages?filepath=dev/notebooks/auto_examples/convert_ieeg_to_bids.ipynb"><img alt="Launch binder" src="../_images/binder_badge_logo.svg" width="150px" /></a>
</div>
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../_downloads/a577037ece7a732b0607a269316e55b8/convert_ieeg_to_bids.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">convert_ieeg_to_bids.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../_downloads/cf640e6bfa39f55978e620ef4269fd4c/convert_ieeg_to_bids.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">convert_ieeg_to_bids.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017-2021, MNE Developers. Last updated on 2021-03-22.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.3.<br/>
    </p>
  </div>
</footer>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-37225609-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-37225609-2');
</script>

  </body>
</html>